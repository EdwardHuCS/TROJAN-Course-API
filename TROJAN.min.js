"use strict";!function(){var e={};const t=require("http"),o=require("./async");var r=function(e,o){function r(){t.get(e,function(e){var t="";e.on("data",function(e){t+=e}),e.on("end",function(){try{var e=JSON.parse(t);o(e)}catch(r){}})}).on("error",function(e){console.error("Error: ",e)})}e="http://web-app.usc.edu/web/soc/api"+e,setTimeout(r,150)};e.term=function(e,t){t=t||{};var o="/terms";r(o,function(o){e(t.curr?o.term[o.term.length-1]:o.term)})},e.current_term=function(t,o){e.term(t,{curr:!0})},e.dept_raw=function(t,c){function n(e){var c="/depts/"+e;r(c,function(e){o.each(e.department,function(e){t(e)})})}c=c||{},c.term?n(c.term):e.current_term(n)},e.school=function(t,o){function r(e){o.school?e.code.toLowerCase()==o.school.toLowerCase()&&t(e):t(o.justcode?e.code:e)}o=o||{},o.justcode=1==o.justcode,o.data_dump?r(o.data_dump):e.dept_raw(r,{term:o.term})},e.dept=function(t,r){function c(e){if(void 0!=e.department){var c=e.department;Array.isArray(c)||(c=[c]),o.each(c,function(e){n.indexOf(e.code)>-1||(n.push(e.code),t(r.justcode?e.code:e))})}}r=r||{},r.justcode=1==r.justcode;var n=[];e.school(function(t){r.school?e.school(function(e){c(e)},{school:r.school,data_dump:t}):c(t)},{term:r.term})},e.dept_info=function(t,o){function c(e,t,o){var c="/classes/"+e+"/"+t;r(c,function(e){o(e.Dept_Info)})}function n(o){e.dept(function(e){c(e,o,t)},{term:o,justcode:!0})}o=o||{},o.dept?o.term?c(o.dept,o.term,t):e.current_term(function(e){c(o.dept,e,t)}):o.term?n(o.term):e.current_term(function(e){n(e)})},e.course_raw=function(t,c){function n(e,t,n){var u="/classes/"+e+"/"+t;r(u,function(e){function t(e){s.indexOf(r.ScheduledCourseID)>-1||(s.push(e.ScheduledCourseID),n(c.justcode?e.ScheduledCourseID:e))}var r=e.OfferedCourses.course;Array.isArray(r)?o.each(r,function(e){t(e)}):void 0!=r&&t(r)})}function u(o){e.dept(function(e){n(e,o,t)},{justcode:!0})}c=c||{},c.justcode=1==c.justcode;var s=[];c.dept?c.term?n(c.dept,c.term,t):e.current_term(function(e){n(c.dept,e,t)}):c.justcode?c.term?u(c.term):e.current_term(u):console.error("Please at LEAST include {justcode:true}")},e.course=function(t,o){function r(t,o,r,c,n){e.course_raw(function(e){(e.ScheduledCourseID==t+"-"+o+r||e.CourseData.prefix==t&&e.CourseData.number==o)&&n(e.CourseData)},{dept:t,term:c})}if(o=o||{},o.course){o.course=o.course.toUpperCase();var c=o.course.split("-");c[1].length>3&&(c[2]=c[1].substring(3),c[1]=c[1].substring(0,3)),2!=c.length&&3!=c.length||!isNaN(c[0])||isNaN(c[1])?console.error("courseid format incorrect"):o.term?r(c[0],c[1],c[2],o.term,t):e.current_term(function(e){r(c[0],c[1],c[2],e,t)})}else console.error("Need a course")},e.sect=function(t,r){r=r||{},r.justcode=1==r.justcode,e.course(function(e){r.sect?o.each(e.SectionData,function(e){e.id==r.sect.substring(0,5)&&t(r.justcode?e.id+e.dclass_code:e)}):o.each(e.SectionData,function(e){t(r.justcode?e.id+e.dclass_code:e)})},{course:r.course,term:r.term})},"object"==typeof module&&module.exports&&(module.exports=e)}();